[] (NodeRes ndr) {
    vec2 q = vec2(length(ndr.pos.xy) - Size, ndr.pos.z);
    float knot = atan(ndr.pos.x, ndr.pos.y) * Twists;
    q *= rotation_2D(knot);
    q.y = abs(q.y) - Spacing;
    if (Square) {
        q = abs(q) - vec2(Thickness);
        return NodeRes(ndr.pos, IS0_FIX_ARTIFACTS(
            length(max(q, 0.)) + min(max(q.x, q.y), 0.)
        ), ndr.md);
    }
    else {
        return NodeRes(ndr.pos, IS0_FIX_ARTIFACTS(
            length(q) - Thickness
        ), ndr.md);
    }
}

float {
    "Name": "Size",
    "Default": 1.0,
    "Min": 0.0,
    "Max": 5.0
}

float {
    "Name": "Thickness",
    "Default": 0.175,
    "Min": 0.0,
    "Max": 2.5
}

int {
    "Name": "Twists",
    "Default": 3,
    "Min": 1,
    "Max": 10
}

float {
    "Name": "Spacing",
    "Default": 0.4,
    "Min": 0.0,
    "Max": 2.0
}

bool {
    "Name": "Square",
    "Default": false
}