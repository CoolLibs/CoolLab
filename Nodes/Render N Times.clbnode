
INPUT UV->CIELAB_PremultipliedA `Image`;
INPUT int `N`;
INPUT(CIELAB_PremultipliedA, CIELAB_PremultipliedA)->CIELAB_PremultipliedA `Blend Mode`;

OUTPUT float `Index`;

CIELAB_PremultipliedA main(UV uv)
{
    vec4 color = vec4(0.);

    for (int i = 0; i < `N`; ++i)
    {
        `Index` = i;
        color   = `Blend Mode`(`Image`(uv), color);
    }

    return color;
}