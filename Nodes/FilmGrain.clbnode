#include <random>

// To learn how to write nodes, see https://coollibs.github.io/lab/Writing%20Nodes/Intro

INPUT UV->sRGB `Image`;
INPUT float `Threshold`;
INPUT float `Noise`;


sRGB main(UV uv){
    float thresh = 0.2;
    
    vec2 rand = hash_0_to_1_2D_to_2D(uv);
    float hash = rand.x*100;
    float noise = 0;
    if (hash-`Threshold`<0){
       noise = pow(rand.y*2-1,1/`Noise`);
    }
    vec3 tex = `Image`(uv);
    vec3 col = tex + noise;
    return col;
}


